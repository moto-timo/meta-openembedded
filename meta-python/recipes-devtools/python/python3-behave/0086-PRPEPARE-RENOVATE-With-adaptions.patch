From f39dab19e7b4cab45dfe33dcb7c63fee4366b9bf Mon Sep 17 00:00:00 2001
From: jenisys <jenisys@users.noreply.github.com>
Date: Wed, 4 Nov 2020 10:28:59 +0100
Subject: [PATCH] PRPEPARE-RENOVATE: With adaptions

* Provide locations/patterns for pip requirements file(s)
* Move "renovate.json" to ".github/"
---
 .github/renovate.json                         | 13 ++++++++
 MANIFEST.in                                   |  4 +--
 issue.features/README.rst                     | 32 +++++++++++++++++++
 issue.features/README.txt                     | 17 ----------
 .../{requirements.txt => py.requirements.txt} |  7 ++--
 py.requirements/{README.txt => README.rst}    |  0
 py.requirements/testing.txt                   |  4 ++-
 renovate.json                                 |  5 ---
 8 files changed, 53 insertions(+), 29 deletions(-)
 create mode 100644 .github/renovate.json
 create mode 100644 issue.features/README.rst
 delete mode 100644 issue.features/README.txt
 rename issue.features/{requirements.txt => py.requirements.txt} (82%)
 rename py.requirements/{README.txt => README.rst} (100%)
 delete mode 100644 renovate.json

diff --git a/.github/renovate.json b/.github/renovate.json
new file mode 100644
index 0000000..3399a00
--- /dev/null
+++ b/.github/renovate.json
@@ -0,0 +1,13 @@
+{
+  "extends": [
+    "config:base"
+  ],
+  "pip_requirements": {
+    "fileMatch": [
+        "py.requirements/all.txt",
+        "py.requirements/*.txt",
+        "tasks/py.requirements.txt",
+        "issue.features/py.requirements.txt"
+    ]
+}
+}
diff --git a/MANIFEST.in b/MANIFEST.in
index 60c2601..84d20f4 100644
--- a/MANIFEST.in
+++ b/MANIFEST.in
@@ -28,8 +28,8 @@ recursive-include tasks         *.py *.zip *.txt *.rst
 recursive-include tools         *.feature *.py *.yml *.sh
 recursive-include features      *.feature *.py *.txt
 recursive-include issue.features  *.feature *.py *.txt
-recursive-include more.features *.feature *.py *.txt
-recursive-include py.requirements  *.txt
+recursive-include more.features *.feature *.py *.txt *.rst
+recursive-include py.requirements  *.txt *.rst
 
 prune .tox
 prune .venv*
diff --git a/issue.features/README.rst b/issue.features/README.rst
new file mode 100644
index 0000000..1d1d980
--- /dev/null
+++ b/issue.features/README.rst
@@ -0,0 +1,32 @@
+issue.features:
+===============================================================================
+
+:Requires: Python >= 2.7 or Python >= 3.5
+
+This directory contains behave self-tests to ensure that behave related
+issues are fixed.
+
+PROCEDURE:
+
+    * ONCE: Install python requirements ("py.requirements.txt")
+    * Run the tests with behave
+
+.. code-block:: shell
+
+    # -- FOR:
+    # pip:  For python2.7 or python3 (depends on platform and/or user))
+    # pip3: For python3
+    pip  install -U -r issue.features/testing.txt
+    pip3 install -U -r issue.features/testing.txt
+
+
+ALTERNATIVE:
+
+.. code-block:: shell
+
+    pip  install -U -r py.requirements/testing.txt
+    pip3 install -U -r py.requirements/testing.txt
+
+.. code-block:: shell
+
+    bin/behave -f progress issue.features/
diff --git a/issue.features/README.txt b/issue.features/README.txt
deleted file mode 100644
index af499f3..0000000
--- a/issue.features/README.txt
+++ /dev/null
@@ -1,17 +0,0 @@
-issue.features:
-===============================================================================
-
-:Status:   PREPARED (fixes are being applied).
-:Requires: Python >= 2.6 (due to step implementations)
-
-This directory contains behave self-tests to ensure that behave related
-issues are fixed.
-
-PROCEDURE:
-
-    * ONCE: Install python requirements ("requirements.txt")
-    * Run the tests with behave
-
-::
-
-    bin/behave -f progress issue.features/
diff --git a/issue.features/requirements.txt b/issue.features/py.requirements.txt
similarity index 82%
rename from issue.features/requirements.txt
rename to issue.features/py.requirements.txt
index d0c4bab..f0def9d 100644
--- a/issue.features/requirements.txt
+++ b/issue.features/py.requirements.txt
@@ -1,12 +1,11 @@
 # ============================================================================
 # PYTHON PACKAGE REQUIREMENTS: For running issue.features/
 # ============================================================================
-# REQUIRES: Python >= 2.5
-# REQUIRES: Python >= 3.2
+# REQUIRES: Python >= 2.7
+# REQUIRES: Python >= 3.5
 # DESCRIPTION:
 #    pip install -r <THIS_FILE>
 #
 # ============================================================================
 
-PyHamcrest >= 1.6
-
+PyHamcrest >= 2.0.2
diff --git a/py.requirements/README.txt b/py.requirements/README.rst
similarity index 100%
rename from py.requirements/README.txt
rename to py.requirements/README.rst
diff --git a/py.requirements/testing.txt b/py.requirements/testing.txt
index 85b0908..5ccdda8 100644
--- a/py.requirements/testing.txt
+++ b/py.requirements/testing.txt
@@ -8,10 +8,12 @@ pytest <  5.0; python_version <  '3.0' # pytest >= 4.2
 pytest >= 5.0; python_version >= '3.0'
 pytest-html >= 1.19.0
 mock  >= 2.0
-PyHamcrest >= 1.9
+PyHamcrest >= 2.0.2
 
 # -- NEEDED: By some tests (as proof of concept)
 # NOTE: path.py-10.1 is required for python2.6
 # HINT: path.py => path (python-install-package was renamed for python3)
 path.py >= 11.5.0; python_version <  '3.5'
 path >= 13.1.0;    python_version >= '3.5'
+
+-r ../issue.features/py.requirements.txt
diff --git a/renovate.json b/renovate.json
deleted file mode 100644
index f45d8f1..0000000
--- a/renovate.json
+++ /dev/null
@@ -1,5 +0,0 @@
-{
-  "extends": [
-    "config:base"
-  ]
-}
