From 4a1b1681052cc8ee98f151a6f3476fde326bf579 Mon Sep 17 00:00:00 2001
From: jenisys <jenisys@users.noreply.github.com>
Date: Wed, 11 Dec 2019 08:30:11 +0100
Subject: [PATCH] Tweak pytest version selection

---
 py.requirements/ci.travis.txt | 3 ++-
 setup.py                      | 3 ++-
 2 files changed, 4 insertions(+), 2 deletions(-)

diff --git a/py.requirements/ci.travis.txt b/py.requirements/ci.travis.txt
index 73d65f6..5f31802 100644
--- a/py.requirements/ci.travis.txt
+++ b/py.requirements/ci.travis.txt
@@ -1,6 +1,7 @@
 mock
 PyHamcrest >= 1.9
-pytest >= 3.0
+pytest <  5.0; python_version <  '3.0'
+pytest >= 5.0; python_version >= '3.0'
 pytest-html >= 1.19.0
 
 # -- NEEDED: By some tests (as proof of concept)
diff --git a/setup.py b/setup.py
index 8de3ec0..75d6847 100644
--- a/setup.py
+++ b/setup.py
@@ -87,7 +87,8 @@ setup(
         "colorama",
     ],
     tests_require=[
-        "pytest >= 4.2",
+        "pytest <  5.0; python_version <  '3.0'", # >= 4.2
+        "pytest >= 5.0; python_version >= '3.0'",
         "pytest-html >= 1.19.0",
         "mock >= 1.1",
         "PyHamcrest >= 1.9",
