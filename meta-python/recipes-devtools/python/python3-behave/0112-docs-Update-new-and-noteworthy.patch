From 7d8c6bc3424cd9d4ec4ad3ecf496f8f051a70d45 Mon Sep 17 00:00:00 2001
From: jenisys <jenisys@users.noreply.github.com>
Date: Sat, 9 Jan 2021 23:48:52 +0100
Subject: [PATCH] docs: Update new and noteworthy

* Add section on improved active-tag logic
---
 docs/conf.py                       |  2 +-
 docs/new_and_noteworthy_v1.2.7.rst | 45 ++++++++++++++++++++++++++++++
 2 files changed, 46 insertions(+), 1 deletion(-)

diff --git a/docs/conf.py b/docs/conf.py
index 1579a36..cece86a 100644
--- a/docs/conf.py
+++ b/docs/conf.py
@@ -108,7 +108,7 @@ if USE_SPHINX_INTERNATIONAL:
 # -----------------------------------------------------------------------------
 project = u"behave"
 authors = u"Jens Engel, Benno Rice and Richard Jones"
-copyright = u"2012-2020, %s" % authors
+copyright = u"2012-2021, %s" % authors
 
 # The version info for the project you're documenting, acts as replacement for
 # |version| and |release|, also used in various other places throughout the
diff --git a/docs/new_and_noteworthy_v1.2.7.rst b/docs/new_and_noteworthy_v1.2.7.rst
index b7242f7..2eb94ad 100644
--- a/docs/new_and_noteworthy_v1.2.7.rst
+++ b/docs/new_and_noteworthy_v1.2.7.rst
@@ -9,6 +9,7 @@ Summary:
   to match partial tag names, like: ``@foo.*``
 * `Select-by-location for Scenario Containers`_ (Feature, Rule, ScenarioOutline)
 * `Support for emojis in feature files and steps`_
+* `Improve Active-Tags Logic`_
 
 .. _`Example Mapping`: https://cucumber.io/blog/example-mapping-introduction/
 .. _`Example Mapping Webinar`: https://cucumber.io/blog/example-mapping-webinar/
@@ -152,3 +153,47 @@ Support for Emojis in Feature Files and Steps
 .. literalinclude:: ../features/steps/i18n_emoji_steps.py
     :prepend:  # -- FILE: features/steps/i18n_emoji_steps.py
     :language: python
+
+
+Improve Active-Tags Logic
+-------------------------------------------------------------------------------
+
+The active-tag computation logic was slightly changed (and fixed):
+
+* if multiple active-tags with same category are used
+* combination of positive active-tags (``use.with_{category}={value}``) and
+  negative active-tags (``not.with_{category}={value}``) with same category
+  are now supported
+
+All active-tags with same category are combined into one category tag-group.
+The following logical expression is used for active-tags with the same category::
+
+    category_tag_group.enabled := positive-tag-expression and not negative-tag-expression
+      positive-tag-expression  := enabled(tag1) or enabled(tag2) or ...
+      negative-tag-expression  := enabled(tag3) or enabled(tag4) or ...
+       tag1, tag2 are positive-tags, like @use.with_category=value
+       tag3, tag4 are negative-tags, like @not.with_category=value
+
+
+EXAMPLE:
+
+.. code-block:: gherkin
+
+    Feature: Active-Tag Example
+
+      @use.with_browser=Safari
+      @use.with_browser=Chrome
+      @not.with_browser=Firefox
+      Scenario: Use one active-tag group/category
+
+        HINT: Only executed with web browser Safari and Chrome, Firefox is explicitly excluded.
+        ...
+
+      @use.with_browser=Firefox
+      @use.with_os=linux
+      @use.with_os=darwin
+      Scenario: Use two active-tag groups/categories
+
+        HINT 1: Only executed with browser: Firefox
+        HINT 2: Only executed on OS: Linux and Darwin (macOS)
+        ...
